
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Installation &#8212; KOAPY 0.6.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/style.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage" href="usage.html" />
    <link rel="prev" title="KOAPY" href="readme.html" />
    <meta name="google-site-verification" content="DIMzk5-2xmV7MoAYJYUGi1PGowNXA7NB8dome7s1e5k" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">KOAPY</a></h1>



<p class="blurb">Kiwoom Open Api Plus Python</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=elbakramer&repo=koapy&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">KOAPY</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#stable-release">Stable release</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-sources">From sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment">Environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/index.html">Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="readme.html" title="previous chapter">KOAPY</a></li>
      <li>Next: <a href="usage.html" title="next chapter">Usage</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>


<h3 class="donation">Donate/support</h3>



<p>
<a class="badge" href="https://toon.at/donate/637521884081401532">
<img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate">
</a>
</p>





        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<section id="stable-release">
<h2>Stable release<a class="headerlink" href="#stable-release" title="Permalink to this headline">¶</a></h2>
<p>To install KOAPY, run this command in your terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install koapy
</pre></div>
</div>
<p>This is the preferred method to install KOAPY, as it will always install the most recent stable release.</p>
<p>Optionally, in order to install KOAPY with additional <a class="reference external" href="https://github.com/mementum/backtrader">backtrader</a> support, run this command in your terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install koapy<span class="o">[</span>backtrader<span class="o">]</span>
</pre></div>
</div>
<p>If you don’t have <a class="reference external" href="https://pip.pypa.io">pip</a> installed, this <a class="reference external" href="http://docs.python-guide.org/en/latest/starting/installation/">Python installation guide</a> can guide
you through the process.</p>
</section>
<section id="from-sources">
<h2>From sources<a class="headerlink" href="#from-sources" title="Permalink to this headline">¶</a></h2>
<p>The sources for KOAPY can be downloaded from the <a class="reference external" href="https://github.com/elbakramer/koapy">Github repo</a>.</p>
<p>You can either clone the public repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git clone git://github.com/elbakramer/koapy
</pre></div>
</div>
<p>Or download the <a class="reference external" href="https://github.com/elbakramer/koapy/tarball/master">tarball</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl -OJL https://github.com/elbakramer/koapy/tarball/master
</pre></div>
</div>
<p>Once you have a copy of the source, you can install it with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install .
</pre></div>
</div>
</section>
<section id="environment">
<h2>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h2>
<p>KOAPY 라이브러리 설치 이전의 환경 구성부터 최종 라이브러리 설치까지의 전체 과정에 대해 설명합니다.</p>
<section id="os">
<h3>OS<a class="headerlink" href="#os" title="Permalink to this headline">¶</a></h3>
<p>Windows 10 64bit 환경을 권장합니다.</p>
<p>비록 라이브러리가 32bit 환경을 강제하지만 그렇다고 굳이 OS 까지 32bit 를 사용할 필요는 없습니다.</p>
</section>
<section id="kiwoom-open-api">
<h3>Kiwoom Open API<a class="headerlink" href="#kiwoom-open-api" title="Permalink to this headline">¶</a></h3>
<p>키움증권의 계좌개설 및 HTS ID 연결까지는 진행되어 있는 것을 가정합니다.</p>
<p>이후 <a class="reference external" href="https://www.kiwoom.com/h/customer/download/VOpenApiInfoView">키움 OpenAPI+</a> 페이지를 방문해서 사용절차의 Step 1 부터 Step 4 까지 순서대로 따라 진행합니다.
물론 Step 3 의 “OCX 탑재 프로그램 제작” 은 이후 KOAPY 를 활용해서 제작할 수 있는 부분이니
당장은 제공되는 자료들을 참고만 하는 수준이면 됩니다.</p>
<p>마지막 Step 4 의 상시 모의투자는 개발 과정에서 테스트 및 디버깅을 위해 필수로 신청합니다.
아니면 실제 서버에 대해서 요청을 할 수 밖에 없는데, 여러분의 자산은 소중합니다.</p>
</section>
<section id="python-anaconda">
<h3>Python (Anaconda)<a class="headerlink" href="#python-anaconda" title="Permalink to this headline">¶</a></h3>
<p>Python 을 설치하는데 여러 방법이 있겠지만, 여기서는 Anaconda distribution 을 설치하는 내용을 다룹니다.</p>
<p>글을 쓰는 현재 최신 Python 버전은 3.9 까지 나왔지만, Ananconda 에서 제공하는 기본 최신 버전은 3.8 이기 때문에 해당 버전을 기준으로 설명합니다.</p>
<p><a class="reference external" href="https://www.anaconda.com/products/individual">Anaconda Products</a> 페이지를 방문해서 하단으로 스크롤을 하면 Anaconda Installers 라고 해서 설치 파일들을 다운로드 할 수 있도록 되어있습니다.
여기서 Windows 하단의 “64-Bit Graphical Installer” 를 다운로드 해 설치합니다.
설치 시에 그냥 바로 32-Bit Python 을 설치하는 옵션도 있지만.. 개인적으로 권장하진 않습니다.
여기서는 64-Bit Anaconda 를 먼저 설치 후 <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span></code> 를 통해 32-Bit 가상환경을 추가로 구성합니다.</p>
<p>설치가 완료되었으면 시작 화면의 검색창에 Anaconda 를 검색하는 경우 <code class="docutils literal notranslate"><span class="pre">Anaconda</span> <span class="pre">Prompt</span> <span class="pre">(Anaconda3)</span></code> 프로그램을 찾을 수 있습니다.
실행하면 검은색 프롬프트가 뜨는데, 여기서 <code class="docutils literal notranslate"><span class="pre">python</span></code>, <code class="docutils literal notranslate"><span class="pre">conda</span></code> 등의 명령어를 사용할 수 있습니다.
<code class="docutils literal notranslate"><span class="pre">python</span></code> 명령을 입력해 제대로 동작하는지 테스트해봅시다. 이후 문제가 없으면 <code class="docutils literal notranslate"><span class="pre">exit()</span></code> 를 입력해 Python 인터프리터에서 빠져나옵니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python
<span class="go">Python 3.8.3 (default, Jul  2 2020, 17:30:36) [MSC v.1916 64 bit (AMD64)] :: Anaconda, Inc. on win32</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="go">&gt;&gt;&gt; exit()</span>
</pre></div>
</div>
<p>혹시나 <code class="docutils literal notranslate"><span class="pre">pyreadline</span></code> 혹은 <code class="docutils literal notranslate"><span class="pre">history</span></code> 관련 경고가 출력되는 경우에 아래 명령을 통해 패치된 버전으로 교체합니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install -I git+https://github.com/elbakramer/pyreadline.git
</pre></div>
</div>
<p>이제 32-Bit Python 을 설치할 차례입니다.
아래 명령을 한 줄씩 앞서 띄워놓은 프롬프트에 입력해 수행합니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">set</span> <span class="nv">CONDA_FORCE_32BIT</span><span class="o">=</span><span class="m">1</span>
<span class="gp">$ </span>conda create -n x86 <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.8 anaconda
</pre></div>
</div>
<p>여기서 <code class="docutils literal notranslate"><span class="pre">-n</span></code> 뒤에 오는 <code class="docutils literal notranslate"><span class="pre">x86</span></code> 값은 굳이 예시와 같지 않아도 됩니다.
이후에 32-Bit 환경이 필요할 때마다 환경을 불러오는 데에 키값으로 활용될 값입니다.
추후 여러 번 사용하면서 알아보기에/입력하기에 편할법한 값으로 대체하셔도 문제없습니다.</p>
<p>동의를 구하는 단계에서는 <code class="docutils literal notranslate"><span class="pre">y</span></code> 를 입력해줍니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">...</span>
<span class="go">Proceed ([y]/n)? y</span>
<span class="go">...</span>
</pre></div>
</div>
<p>설치가 완료되었으면 이제 아래 명령을 통해 32-Bit Python 환경을 불러옵니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda activate x86
</pre></div>
</div>
<p>제대로 불러온 경우라면 입력창 앞의 괄호로 있던 <code class="docutils literal notranslate"><span class="pre">(base)</span></code> 가 <code class="docutils literal notranslate"><span class="pre">(x86)</span></code> 으로 대체될 겁니다.
앞서 64-Bit 에서 테스트했던 것과 똑같이 32-Bit 에 대해서도 문제가 없는지 확인해봅니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp gp-VirtualEnv">(x86)</span> <span class="gp">$ </span>python
<span class="go">Python 3.8.3 (default, Jul  2 2020, 17:28:51) [MSC v.1916 32 bit (Intel)] :: Anaconda, Inc. on win32</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="go">&gt;&gt;&gt; exit()</span>
</pre></div>
</div>
<p>32-Bit Python 의 설치가 완료되었습니다. <code class="docutils literal notranslate"><span class="pre">[MSC</span> <span class="pre">v.1916</span> <span class="pre">32</span> <span class="pre">bit</span> <span class="pre">(Intel)]</span></code> 구문이 출력되는 것으로 32-Bit 환경이라는 것을 다시 한번 확인 가능합니다.</p>
<p>32-Bit 환경에서 다시 이전의 64-Bit <code class="docutils literal notranslate"><span class="pre">(base)</span></code> 환경으로 다시 돌아가고 싶은 경우에는 아래의 명령을 실행합니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp gp-VirtualEnv">(x86)</span> <span class="gp">$ </span>conda deactivate
</pre></div>
</div>
<p>그러면 다시 앞의 <code class="docutils literal notranslate"><span class="pre">(x86)</span></code> 이 <code class="docutils literal notranslate"><span class="pre">(base)</span></code> 로 바뀌면서 64-Bit 환경으로 돌아오게 됩니다.</p>
<p>이제 다음부터는 <code class="docutils literal notranslate"><span class="pre">Anaconda</span> <span class="pre">Prompt</span> <span class="pre">(Anaconda3)</span></code> 실행 후 <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">x86</span></code> 을 통해서 32-Bit 환경을 불러오거나,
아니면 시작 화면에서 <code class="docutils literal notranslate"><span class="pre">Anaconda</span> <span class="pre">Prompt</span> <span class="pre">(x86)</span></code> 을 찾아서 실행하면 바로 32-Bit 환경으로 시작합니다.</p>
</section>
<section id="koapy">
<h3>KOAPY<a class="headerlink" href="#koapy" title="Permalink to this headline">¶</a></h3>
<p>이후 KOAPY 설치는 <a class="reference external" href="https://pip.pypa.io">pip</a> 를 통해 설치하면 됩니다:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install koapy
</pre></div>
</div>
<p>맨 위의 <a class="reference internal" href="#stable-release"><span class="std std-ref">Stable release</span></a> 의 내용과 동일한 내용입니다.</p>
<p>만약에 <a class="reference external" href="https://github.com/mementum/backtrader">backtrader</a> 관련 기능들이 구현된 <code class="docutils literal notranslate"><span class="pre">koapy.backtrader</span></code> 모듈 하위의 기능들을 사용하고자 하는 경우,
관련 의존성을 포함해 설치하기 위해서는 아래 명령을 실행합니다:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip install koapy<span class="o">[</span>backtrader<span class="o">]</span>
</pre></div>
</div>
<p>OpenAPI 와의 통신을 위해서 32-Bit 환경에는 필수로 설치되어야 합니다.
OpenAPI 의 OCX 라이브러리가 32-Bit 환경만 지원하기 때문입니다.</p>
<p>64-Bit 환경에서의 설치는 선택사항입니다.
혹시나 64-Bit 환경에서만 지원되는 라이브러리 및 기능을 트레이딩 로직에 접목시키고자 하는 경우,
32-Bit 환경에는 서버만 띄워두고 64Bit 환경에서 gRPC 클라이언트 API 를 통해 서버에 연결하여 동일하게 OpenAPI 의 모든 기능을 활용할 수 있습니다.</p>
<p>이후 사용법에 대해서는 <a class="reference internal" href="usage.html"><span class="doc">Usage</span></a> 를 참고하세요.</p>
</section>
<section id="koapy-cli-openapi">
<h3>KOAPY CLI 를 활용한 OpenAPI 설치, 업데이트, 삭제<a class="headerlink" href="#koapy-cli-openapi" title="Permalink to this headline">¶</a></h3>
<p>각각 아래의 명령어를 활용해 OpenAPI 를 설치, 업데이트, 삭제 할 수도 있습니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>koapy install openapi    <span class="c1"># OpenAPI 설치</span>
<span class="gp">$ </span>koapy update openapi     <span class="c1"># OpenAPI 자동 버전 업데이트</span>
<span class="gp">$ </span>koapy uninstall openapi  <span class="c1"># OpenAPI 삭제</span>
</pre></div>
</div>
<p>설치, 삭제의 경우에는 임시폴더에 설치파일을 다운로드 받아 실행하여 설치, 삭제를 진행합니다.
업데이트의 경우에는 OpenAPI 의 버전 업데이트 기능을 활용하는데, 여기에는 로그인 처리를 위한 계정 정보 및 관리자 권한이 필요합니다.</p>
<p>각 명령어의 자세한 옵션등에 대해서는 <code class="docutils literal notranslate"><span class="pre">-h</span></code> 옵션을 통한 도움말을 확인하세요.</p>
</section>
<section id="dll-koapy-cli-pywin32">
<h3>DLL 로딩 오류 해결방법 (KOAPY CLI 를 활용한 pywin32 설치)<a class="headerlink" href="#dll-koapy-cli-pywin32" title="Permalink to this headline">¶</a></h3>
<p>의존성중에 pywin32 의 버전이 301 로 업데이트 되면서 특정 환경에서 (특히 conda 기반 환경) DLL 로딩 관련 오류가 발생할 수 있습니다.
기존에 conda 배포판에서 설치되어 있는 버전과 충돌이 나서 발생하는 이슈이기 때문에 문제가 되는 기존 설치를 제거해주어야 합니다.</p>
<p>대략 아래에 위치한 파일들이 문제를 일으킬 수 있습니다. 파일 이름에서 <code class="docutils literal notranslate"><span class="pre">3X</span></code> 값은 사용하는 Python 버전에 따라 달라질 수 있다는 뜻입니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span><span class="o">{</span>sys.prefix<span class="o">}</span>/Library/bin/pythoncom3X.dll
<span class="gp">$</span><span class="o">{</span>sys.prefix<span class="o">}</span>/Library/bin/pywintypes3X.dll
<span class="gp">$</span><span class="o">{</span>sys.prefix<span class="o">}</span>/Lib/site-packages/win32/pythoncom3X.dll
<span class="gp">$</span><span class="o">{</span>sys.prefix<span class="o">}</span>/Lib/site-packages/win32/pywintypes3X.dll
</pre></div>
</div>
<p>아니면 좀 더 쉽게 각각 아래의 명령어를 통해 pywin32 를 정상적으로 설치, 삭제 할 수 있습니다.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>koapy install pywin32    <span class="c1"># pywin32 설치</span>
<span class="gp">$ </span>koapy uninstall pywin32  <span class="c1"># pywin32 삭제</span>
</pre></div>
</div>
<p>실행시 일반적인 pip 를 통한 설치/삭제를 진행하고 이후 추가적인 후처리 스크립트를 수행해 정상적인 설치/삭제가 될 수 있도록 합니다.</p>
<p>각 명령어의 자세한 옵션등에 대해서는 <code class="docutils literal notranslate"><span class="pre">-h</span></code> 옵션을 통한 도움말을 확인하세요.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2021, Yunseong Hwang.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/installation.rst"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/elbakramer/koapy" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-179490468-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>